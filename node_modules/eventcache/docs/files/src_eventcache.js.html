<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\eventcache.js - EventCache API</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="EventCache API" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.6</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/EventCache.html">EventCache</a></li>
                            </ul>
                
                
                            <ul id="api-modules" class="apis modules">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: src\eventcache.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * The caches.
 *
 * @property caches
 * @type Array
 * @private
 * @static
 */

var caches = [[]];

/**
 * Validates the arguments and tries to extract an event signature.
 *
 * @method extractSignature
 * @private
 * @static
 * @param {Object} args - The original arguments array from a call to add or remove.
 * @return {Array} The event signature.
 */

function extractSignature(args) {

	var signature = [null, null, null, null];

	if(args.length &amp;&amp; (args.length &gt;= 3 || args[0].length &gt;= 3)) {

		if(args.length === 1) { args = args[0]; }

		signature[0] = args[0];
		signature[1] = args[1];
		signature[2] = args[2];
		signature[3] = (args.length === 4) ? args[3] : 0;

		if(signature[3] &lt; 0 || signature[3] &gt;= caches.length) {

		throw new Error(&quot;The given cache index is out of bounds.&quot;);

		}

	} else {

		throw new Error(&quot;Invalid arguments.&quot;);

	}

	return signature;
}

/**
 * Creates a new cache and returns its reference id.
 *
 * @method createCache
 * @return {Number} The index of the newly created cache.
 */

function createCache() { return caches.push([]) - 1; }

/**
 * Creates an event listener and adds its signature to the associated cache.
 *
 * @method bind
 * @static
 * @param {Object} obj - The object.
 * @param {String} event - The event name.
 * @param {Function} listener - The listener.
 * @param {Number} [cache=0] - The cache.
 */

function bind() {

	var s = extractSignature(arguments),
		obj = s[0], type = s[1], fn = s[2], cache = s[3];

	if(obj.addEventListener) {

		obj.addEventListener(type, fn, false);

	} else if(obj.attachEvent) {

		obj.attachEvent(&quot;on&quot; + type, fn);

	} else {

		obj[&quot;on&quot; + type] = fn;

	}

	caches[cache].push(s);
	return s;
}

/**
 * Unbinds an event and removes its signature from the associated cache.
 *
 * @method unbind
 * @static
 * @param {Object} obj - The object.
 * @param {String} event - The event name.
 * @param {Function} listener - The listener.
 * @param {Number} [cache=0] - The cache.
 */

function unbind() {

	var i, s = extractSignature(arguments),
		obj = s[0], type = s[1], fn = s[2], cache = s[3];

	for(i = caches[cache].length - 1; i &gt;= 0; --i) {

		s = caches[cache][i];

		if(s[0] === obj &amp;&amp; s[1] === type &amp;&amp; s[2] === fn) {

			if(obj.removeEventListener) {

				obj.removeEventListener(type, fn, false);

			} else if(obj.detachEvent) {

				obj.detachEvent(&quot;on&quot; + type, fn);

			} else {

				obj[&quot;on&quot; + type] = null;

			}

			caches[cache].splice(i, 1);
			i = 0;

		}

	}

}

/**
 * Removes all event signatures from the given cache
 * and releases the respective event listeners.
 * Calling flush without specifying a cache will unbind
 * and remove all listeners in all caches. Empty caches
 * will then be dropped and can no longer be used.
 * Only the default cache will remain.
 *
 * @method flush
 * @static
 * @param {Number} [cache] - The index of the cache to flush. If not provided, all caches will be flushed.
 */

function flush(cache) {

	var i, len, j, reset = false;

	if(typeof cache !== &quot;number&quot; || isNaN(cache)) {

		cache = 0;
		len = caches.length;
		reset = true;

	} else {

		if(cache &lt; 0) { cache = 0; }
		else if(cache &gt;= caches.length) { cache = caches.length - 1; }
		len = cache + 1;

	}

	for(i = cache; i &lt; len; ++i) {

		for(j = caches[i].length - 1; j &gt;= 0; --j) {

			unbind(caches[i][j]);

		}

	}

	// Drop all caches except for the default one.
	if(reset) { caches.length = 1; }

}

/**
 * Provides insight into the internals.
 *
 * @method status
 * @static
 * @return {Object} The default cache and all additional caches.
 */

function status() {

	return {

		defaultCache: caches.slice(0, 1),
		additionalCaches: caches.slice(1)

	};

}

/**
 * The Event Cache class is a compilation of
 * static functions with isolated data structures.
 *
 * @class EventCache
 * @static
 */

export {createCache, bind, unbind, flush, status};

    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
